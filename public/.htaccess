RewriteEngine On
RewriteBase /stepik_parser_test/public/

# Если файл или директория существуют физически, используем их
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Перенаправляем все API запросы на api.php
RewriteCond %{REQUEST_URI} ^/stepik_parser_test/public/api/v1/
RewriteRule ^api/v1/(.*)$ api.php [QSA,L]

# Перенаправляем запросы к курсам на test_courses.php
RewriteRule ^courses/?$ test_courses.php [QSA,L]
RewriteRule ^courses/([0-9]+)/?$ test_courses.php?id=$1 [QSA,L]

# Если нет других совпадений, перенаправляем на index.php
RewriteCond %{REQUEST_URI} !^/stepik_parser_test/public/api\.php$
RewriteRule ^(.*)$ index.php [QSA,L] 