# Отключаем проверку версии PHP
php_value display_startup_errors 0

# Перенаправляем все API запросы на api.php в public директории
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/v1/(.*)$ public/api.php [QSA,L]

# Правило для прямого доступа к api.php
RewriteRule ^public/api\.php(.*)$ public/api.php$1 [QSA,L]

# Включаем CORS заголовки
Header always set Access-Control-Allow-Origin "*"
Header always set Access-Control-Allow-Methods "GET, POST, OPTIONS, DELETE, PUT"
Header always set Access-Control-Allow-Headers "Content-Type, Authorization"

# Обработка OPTIONS запросов
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=200,L]